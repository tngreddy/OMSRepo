
<div class="panel panel-default mainWrapper custompanel hidden-print">
	<!-- Default panel contents -->
	<div class="panel-heading">
		<span class="lead">Returned Inward Note </span>
	</div>

<div class="filtercontainer">

	<div class="searchPanel">

		<form novalidate angular-validator name="rinDataForm"
			class="form-horizontal">
			<div class="">
				<label class="col-sm-3 control-label">RIN No</label>
				<div class="col-sm-5">
					<input type="text" class="form-control" validate-on="dirty"
						name="rinNo" placeholder="RIN No" ng-model="rinNo"
						required-message="'RIN No is required'" required />
				</div>
			</div>
			<button type="submit" class="btn btn-flat btn-primary" name="search"
				ng-click="fetchRINData(rinNo,false)">
				<span data-ng-hide="loading"> Search </span> <span
					data-ng-show="loading"> Searching <i
					class="fa fa-spinner fa-spin"></i></span>
			</button>
			<button type="submit" class="btn btn-flat btn-primary"
				ng-click="fetchRINData(rinNo,true)">Get Print Format</button>
		</form>
		
	</div>
	<div class="createBtnPanel">
	<button type="button" class="btn btn-flat bg-olive pull-right" uib-tooltip="Create a new RIN"
			ng-click="createRINModal()">
			<i class="fa fa-plus"></i> Create RIN </button>
	</div>
	
	</div>

</div>
<div ng-show="showRINData"
	class="panel panel-default mainWrapper dataPanel">
	<div class="panel-heading">
		<span class="lead">{{rinData.rin.rinNo}} </span>
	</div>
	<div ng-show=user.maverick class="modal-footer">
		<button class="btn btn-flat btn-warning"
			ng-click="editRINModal(rinData)">
			<i class="fa fa-edit "></i> Edit
		</button>
		<button class="btn btn-flat btn-danger"
			ng-click="deleteRINModal(rinData)">
			<i class="fa fa-trash "></i> Delete
		</button>
	</div>

	<div class="tablecontainer">

		<h4>
			<span class="label label-default">Data</span>
		</h4>

		<table id="rinTable" class="table table-bordered table-striped">
			<thead>
				<tr>
					<th>RIN No</th>
					<th>From</th>
					<th>From Name</th>
					<th>Doc Ref No</th>
					<th>Doc Date</th>
					<th>Status</th>
					<th>RIN Date</th>

				</tr>
			</thead>
			<tbody>
				<tr>
					<td><span ng-bind="rinData.rin.rinNo"></span></td>
					<td><span ng-bind="rinData.rin.from"></span></td>
					<td><span ng-bind="rinData.rin.fromName"></span></td>
					<td><span ng-bind="rinData.rin.docRefNo"></span></td>
					<td><span ng-bind="rinData.rin.docDate"></span></td>
					<td><span ng-bind="rinData.rin.status"></span></td>
					<td><span ng-bind="rinData.rin.rinDate"></span></td>

				</tr>
			</tbody>
		</table>
	</div>
	<div class="tablecontainer">

		<h4>
			<span class="label label-default">Products Info</span>
		</h4>

		<table id="rinTable" class="table table-bordered table-striped">
			<thead>
				<tr>
					<th>Product Id</th>
					<th>Product Name</th>
					<th>Good In</th>
					<th>Def In</th>
					<th>Total Qty</th>
					<th>unit Basic Rate</th>
					<th>Total Amount</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="prodInfo in rinData.rin.prodInfoList">
					<td><span ng-bind="prodInfo.product.productId"></span></td>
					<td><span ng-bind="prodInfo.product.productName"></span></td>
					<td><span ng-bind="prodInfo.goodIn"></span></td>
					<td><span ng-bind="prodInfo.defIn"></span></td>
					<td><span ng-bind="prodInfo.totalQty"></span></td>
					<td><span ng-bind="prodInfo.unitBasicRate"></span></td>
					<td><span ng-bind="prodInfo.totalAmount"></span></td>
				</tr>
			</tbody>
		</table>
	</div>
</div>


<div ng-show="showRINDetails" class="printFormatPanel">
	<table class="table table-bordered" style="margin-bottom: 2px">
			 <tr class="header" ng-include="'resources/templates/common/header.html'" >
		     </tr>
			<tr>
				<td colspan="2">
					<h3 class="text-center">
						<u>RETURNED INWARD NOTE</u>
					</h3></td>
			</tr>
			<tr ng-include="'resources/templates/common/registrationDetails.html'">
				
			</tr>
			<tr>
				<td style="padding:0px;"><span><strong>FROM</strong><span>
				  <div class="fromAddress">
					<address>
						<strong>{{rinData.fromDetails.name}}</strong><br>
						{{rinData.fromDetails.contact.address.addressLine1}}
						{{rinData.fromDetails.contact.address.addressLine2}}<br>
						{{rinData.fromDetails.contact.address.city}}<br>
						{{rinData.fromDetails.contact.address.state}}-
						{{rinData.fromDetails.contact.address.pinCode}}
					</address>
					</div>
					</td>
				<td style="padding:0px;">
				<table class="table table-bordered" style="margin-bottom: 0px;border: 0px;">
						<tr>
							<td width="35%"><span>RIN NO</span></td>
							<td width="65%"><span>{{rinData.rin.rinNo}}</span></td>
						</tr>
						<tr>
							<td><span>RIN DATE</span></td>
							<td><span>{{rinData.rin.rinDate}}</span></td>
						</tr>
						<tr>
							<td><span>RIN DOC REF</span></td>
							<td><span>{{rinData.rin.docRefNo}}</span></td>
						</tr>
					</table></td>
			</tr>
			<tr>
				<td><span>{{rinData.rin.from}}</span></td>
				<td><span>Name : {{rinData.rin.fromName}}</span></td>
			</tr>
			<tr>
				<td><span>Contact No : </span><span>{{rinData.fromDetails.contact.phoneNo}}</span></td>
				<td><span>TIN : </span><span>{{rinData.fromDetails.tinNo}}</span> </td>
			</tr>
			<tr>
				<td><span>Mobile No : </span><span>{{rinData.fromDetails.contact.mobileNo}}</span></td>
				<td><span>CST No : </span><span>{{rinData.fromDetails.cstNo}}</span> </td>
			</tr>
			<tr>
				<td><span>Fax No : </span><span></span></td>
				<td><span>Email : </span></td>
			</tr>
			<tr>
				<td colspan="2" style="padding:0px;">
				<table class="table table-bordered" style="margin:0px;border:0px white;">
						<tr class="text-center">
							<td width="3%"><span>SNo</span></td>
							<td width="42%"><span>Description</span></td>
							<td width="7%"><span>Good In</span></td>
							<td width="7%"><span>Def In</span></td>
							<td width="7%"><span>Total Qty</span></td>
							<td width="7%"><span>Unit Of Measure</span></td>
							<td width="7%"><span>Unit Basic Rate</span></td>
							<td width="10%"><span>Total Amount</span></td>
						</tr>
						<tr ng-repeat="prodInfo in rinData.rin.prodInfoList">
							<td><span style="float:right;" ng-bind="$index+1"></span></td>
							<td><span ng-bind="prodInfo.product.productName"></span></td>
							<td><span style="float:right;" ng-bind="prodInfo.goodIn"></span></td>
							<td><span style="float:right;" ng-bind="prodInfo.defIn"></span></td>
							<td><span style="float:right;" ng-bind="prodInfo.totalQty"></span></td>
							<td><span ng-bind="prodInfo.product.unitOfMeasure"></span></td>
							<td><span style="float:right;" ng-bind="prodInfo.unitBasicRate"></span></td>
							<td><span style="float:right;" ng-bind="prodInfo.totalAmount"></span></td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td colspan="2"><span>VALUE : (FOR OCTROI PURPOSES)</span></td>
			</tr>
			<tr>
				<td colspan="2"><span>REMARKS ON MATERIAL RECEIVED :</span><span>&nbsp;{{rinData.rin.remarks}}</span><br><br></td>
			</tr>
			<tr ng-include="'resources/templates/common/footer.html'">
			</table>
	<span>NOTE: The above Transaction is not sale</span>

</div>

<!-- Create RIN overlay -->
<modal size="modal-lg" visible="showAddModal">
<form novalidate angular-validator
	angular-validator-submit="createRIN()" name="createRINForm"
	class="form-horizontal">
	<div class="modal-header with-border">
		<button type="button" class="close" data-dismiss="modal"
			aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
		<h4 class="modal-title" id="myModalLabel">Create RIN</h4>
	</div>
	<div class="modal-body">
		<div class="box-body">
		<div class="filtercontainer">
			<div class="form-left">
				<label class="col-sm-3 control-label">From</label>
				<div class="col-sm-8 selectContainer">
					<select class="form-control" " name="from"
							ng-model="rin.from" 
							ng-change="populateFromData(rin.from)"
							validate-on="dirty"
							required-message="'From is required'" required>
							<option	value="SUPPLIER">SUPPLIER</option>
							<option	value="CUSTOMER">CUSTOMER</option>
							<option	value="OTHERS">OTHERS</option>
						</select>
				</div>
			</div>
			
			<div class="form-left">
				<label class="col-sm-3 control-label">From Name</label>
				<div class="col-sm-8 selectContainer">
						<select class="form-control" name="fromName"
							ng-model="rin.fromName" validate-on="dirty"
							ng-change="fetchGRCNos(rin.fromName)"
							required-message="'From Name is required'" required>
							<option	ng-selected="{{data.name == rin.fromName}}"
								    ng-repeat="data in dataList" value="{{data.name}}">{{data.name}}</option>
						</select>
				</div>
			</div>
			</div>
			<div class="filtercontainer">
			<div class="form-left">
				<label class="col-sm-3 control-label">Doc Ref No</label>
				<div class="col-sm-8">
					<input type="text" 
					    class="form-control" 
					    validate-on="dirty"
						name="docRefNo" 
						placeholder="Doc Ref No"
						ng-model="rin.docRefNo"
						required-message="'Doc Ref No is required'" required />
				</div>
			</div>
			
			<div class="form-left">
				<label class="col-sm-3 control-label">Doc Date</label>
				<div class="col-sm-8">
				<input type="text" class="form-control"  ng-click="open($event)"
						validate-on="dirty"
						name="docDate" 
						placeholder="Doc Date"
						ng-model="rin.docDateValue"
						uib-datepicker-popup="dd/MM/yyyy" is-open="status.opened" max-date="maxDate" close-text="Close"
						required-message="'Doc Date is required'" required readonly/>
			   
			</div>
			</div>
			
		</div>
		<div class="filtercontainer">
		<div class="form-left">
				<label class="col-sm-3 control-label">GRC</label>
				<div class="col-sm-8 selectContainer">
						<select class="form-control" name="grcNo"
							ng-model="rin.grcNo" validate-on="dirty"
							ng-change="fetchGRCData(rin.grcNo)"	>
							<option	value="NONE">NONE</option>
							<option	ng-repeat="grc in grcs" value="{{grc}}">{{grc}}</option>
						</select>
				</div>
			</div>
			</div>
	<div class="prodContainer">
	<span class="btn btn-danger  btn-flat btn-xs">Product Info</span>
		<fieldset  data-ng-repeat="prodInfo in rin.prodInfoList">
	<div>	
	<div class="filtercontainer">		

			<div class="form-left width33">
				<label class="col-sm-3 control-label">Product Name</label>
				<div class="col-sm-8">
					<select class="form-control" name="productName{{$index}}"
							ng-model="prodInfo.product.productId" validate-on="dirty"
							required-message="'Product Name is required'" required>
							<option	ng-repeat="product in productsInfo" value="{{product.id}}">{{product.name}}</option>
						</select>
						</div>
			</div>

	<div class="form-left width33">
				<label class="col-sm-4 control-label">Good In</label>
				<div class="col-sm-8">
					<input type="number" min="0" max="100"
					    class="form-control" 
					    validate-on="dirty"
						name="goodIn{{$index}}" 
						placeholder="Good In"R
						ng-model="prodInfo.goodIn"
						invalid-message="'Good In should be a postive number'"
						/>
				</div>
			</div>
			
	<div class="form-left width33">

				<label class="col-sm-3 control-label">Defective In</label>
				<div class="col-sm-8">
					<input type="number" min="0" 
					    class="form-control" 
					    validate-on="dirty"
						name="defectiveIn{{$index}}" 
						placeholder="Defective In"
						ng-model="prodInfo.defIn"
						invalid-message="'Defective In should be a postive number'"
						 />
				</div>
			</div>
	</div>
	</div>
      
   </fieldset>
   <div style="height: 34px;">
   		<a class="btn btn-flat btn-danger pull-right"  ng-click="removeChoice()">-</a>
  		<a class="btn btn-flat bg-olive pull-right"  ng-click="addNewChoice()">+</a>
   </div>
   </div>
		<div class="filtercontainer">
			
		     <div class="form-group">
				<label class="col-sm-2 control-label">Remarks</label>
				<div class="col-sm-9">
					<textarea rows="3"
					    class="form-control" 
					    validate-on="dirty"
						name="remarks" 
						placeholder="Remarks"
						ng-model="rin.remarks"
						></textarea>
				</div>
			</div>
			
		</div>
		
	</div>	
	<div class="modal-footer">
		<button type="button" class="btn btn-flat btn-default" data-dismiss="modal">Close</button>
		<button type="submit" class="btn btn-flat btn-primary">Create</button>
	</div>
</form>
</modal>
